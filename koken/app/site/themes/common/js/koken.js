(function(){window.$K={pulse:{plugins:{},groups:{},refs:{},overrides:{},register:function(e){this.refs[e.id]&&(this.refs[e.id].kill(),delete this.refs[e.id]);var t="#"+e.id,n=$(t).data("pulse-group");$(t).children(":not(div.cover)").remove(),this.groups[n]||(this.groups[n]=e.options);var r=this.groups[n],i=["width","height","dataUrl","data","next","prev"];return this.overrides[e.id]||(this.overrides[e.id]={}),$.each(i,$.proxy(function(t,n){e.options[n]&&(this.overrides[e.id][n]=e.options[n])},this)),this.refs[e.id]=Pulse(t,$.extend(r,this.overrides[e.id])),$.each(this.plugins,$.proxy(function(t,n){r[t+"_enabled"]&&this.refs[e.id][t](r)},this)),this.refs[e.id]}},navigation:{sets:[],init:!1,toggleChilds:function(e,t){var n=t&&t==="none"||$(e).hasClass("k-nav-open"),r=e.siblings("ul");if(!r.length)return;n?$(e).removeClass("k-nav-open"):$(e).addClass("k-nav-open"),r.css("display",n?"none":"block")},nest:function(){var e=$("a.k-nav-set"),t=this;if(this.sets.length===e.length)return;this.sets=e,$.each(this.sets,$.proxy(function(e,t){t.onclick===null&&(t.onclick=$.proxy(function(e){$(".k-nav-current").removeClass("k-nav-current"),this.toggleChilds($(t)),e.preventDefault()},this))},this)),this.setCurrent()},setCurrent:function(e){var t=RegExp("(http://"+location.host+")?"+$K.location.root_folder+"(/(index|preview).php)?"),e=e||location.href,n=e.replace(t,"").replace(/\?rand=.*$/,"")||"/";$.each(this.sets,$.proxy(function(e,t){this.toggleChilds($(t),"none")},this)),$(".k-nav-current").removeClass("k-nav-current"),$.each($("nav a:not(.k-nav-set)"),$.proxy(function(e,r){r=$(r);var i=r.attr("href").replace(t,"");if(n===i){r.addClass("k-nav-current");for(;;){r=r.parent();if(r.hasClass("k-nav-root"))break;r.get(0).nodeName.toLowerCase()==="ul"&&r.show()}return!1}},this))}},keyboardScroll:function(e,t){t=t||0;var n=$(e),r=n.length-1,i=0,s=!1,o;$(document).on("scroll",function(){n.each(function(e,n){if($(n).offset().top+t>$(window).scrollTop())return i=e-1,!1})});var u=function(e){if(e===37&&i===0||e===39&&i===r||e!==37&&e!==39)return;e===37?i--:e===39&&i++;var s=n.get(i).offsetTop+t;$("html,body").animate({scrollTop:s})};$(window).on("keydown",function(e){u(e.which)})},lazyLoad:function(){var e=$(window).height()+$(window).scrollTop(),t=$(window).width()+$(window).scrollLeft();$.each($("img.k-lazy-loading"),function(n,r){r=$(r);if(!r.attr("data-src"))return;var i=r.offset();if(i.top<=e&&i.top+r.height()>=$(window).scrollTop()&&i.left<=t&&i.left+r.width()>=$(window).scrollLeft()){var s=new Image;s.onload=function(){r.removeClass("k-lazy-loading");var e=r.data("lazy-fade");e&&r.css("opacity",.001),setTimeout(function(){r.addClass("k-lazy-loaded"),console.log("lazy load: "+r.attr("data-src")),r.attr("src",r.attr("data-src")),r.animate({opacity:1},e)},0)},s.src=r.attr("data-src")}})},isRetina:function(){return $K.retinaEnabled&&("devicePixelRatio"in window&&devicePixelRatio>1||"matchMedia"in window&&matchMedia("(min-resolution:144dpi)").matches)},loadImages:function(){var e=$("img[data-src]"),t=this.isRetina();e.length&&$.each(e,function(e,n){$e=$(n);var r=$e.attr("data-src");t||(r=r.replace(".2x.",".")),$e.hasClass("k-lazy-loading")?$e.attr("data-src",r):$e.attr("src",r)})},lazyLoadInit:function(){var e=$("img.k-lazy-loading");e.length&&($.each(e,function(e,t){$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}),setTimeout(function(){$K.lazyLoad()},100))},resizeVideos:function(){$(".mejs-container video").each(function(){$v=$(this);var e=$v.data("aspect"),t=$v.parents(".mejs-container").parent().width(),n=t/e,r=this.player;r.setPlayerSize(t,n),r.setControlsSize();if(this.pluginType==="native"){var i={width:t,height:n};$v.attr(i).css(i)}else r.options.videoWidth=t,r.options.videoHeight=n/e,r.media.setVideoSize&&r.media.setVideoSize(t,n)})},responsiveBackgrounds:function(){var e=$("[data-bg-presets]");$.each(e,function(){var e=$(this),t=e.width(),n=e.height(),r=t>=n?"width":"height",i=!1,s,o=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g,u=e.data("bg-presets");while(s=o.exec(u)){i=e.data("base")+","+s[1]+($K.isRetina()?".2x":"")+"."+e.data("extension");if(r==="width"){if(s[2]>=t)break}else if(s[3]>=n)break}i&&e.css({backgroundImage:"url("+i+")",backgroundSize:"cover",backgroundPosition:"center center"})})},responsiveImages:function(){var e=$("img[data-presets]"),t=e.length,n,r,i,s,o,u,a,f,l;$.each(e,function(e,t){t=$(t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")),t.css("opacity",1))}),window.setTimeout(function(){e=$("img[data-presets]"),$.each(e,function(e,t){t=$(t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")));var n=t.data("presets"),r=t.data("hidpi"),u=t.attr("src")||"",c=$.browser.msie?0:parseInt(t.css("width"),10)||0,h=$.browser.msie?0:parseInt(t.css("height"),10)||0,p=0,d=t,v;c<10&&(c=0),h<10&&(h=0);while(p===0){d=d.parent();var m=d.css("display");if(m=="none")return;m!="inline"&&(p=d.width())}l=d.css("box-sizing");var g=h>0?h:d.height(),y=parseInt(t.css("max-height"),10);t.data("originalDom")||(c>0&&c!==p?(t.data("originalDom",t.clone()),p=Math.min(p,c)):t.data("originalDom","noreplace")),f=t.data("respond-to")||"width",isNaN(y)||(g=y,f==="width"&&(f=!1));var b=p/g,w,E=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g;i=t.data("base"),s=t.data("extension"),cropTo=t.data("retain-aspect")||!1;if(cropTo){var S=cropTo.split(":");b=S[0]/S[1],g=Math.round(p/b),t.attr("width",p),t.attr("height",g);var x=u.match(/\,([0-9]+)/);if(x){var T=Math.abs(p-x[1]);if(T/x[1]<.2)return}u=i+","+p+"."+g+".100.1.crop."+(r?"2x.":"")+s}else{var N=!1,C=!1,k=0;while(w=E.exec(n)){o=w[1].indexOf(".crop")!==-1,a=w[2]/w[3],u=i+","+w[1]+(r?".2x":"")+"."+s,N=C=!1;if(o){if(f==="width"){if(w[2]>=p){k=p;break}}else if(f==="height"||y){if(w[3]>=g){k=g;break}}else if(w[2]>=p&&w[3]>=g){k=Math.min(p,g);break}}else if(f==="width"){if(w[2]>=p){t.attr("width",p),t.attr("height",Math.ceil(p/a));break}}else if(f==="height"){if(w[3]>=g){t.attr("height",g),t.attr("width",Math.ceil(g*a));break}}else{if(a>=b&&w[2]>=p){t.attr("width",p),t.attr("height",p/a);break}if(a<b&&w[3]>=g){t.attr("height",g),t.attr("width",Math.ceil(g*a));break}}N=w[2],C=w[3]}o?(t.attr("width",k),t.attr("height",k)):N&&(t.attr("width",N),t.attr("height",C))}$K.isRetina()||(u=u.replace(".2x.",".")),(t.hasClass("k-lazy-loading")||t.hasClass("k-lazy-loaded"))&&u!==t.attr("src")?(t.removeClass("k-lazy-loaded"),t.addClass("k-lazy-loading"),t.attr("data-src",u),t.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")):t.attr("src",u)}),setTimeout(function(){$K.lazyLoadInit()},0),$(window).trigger("k-resize")},0)},infinity:{$target:!1,isLoading:!1,bttn:!1,next:function(){if($K.location.parameters.page<this.totalPages){$(window).trigger("k-infinite-loading"),$K.location.parameters.page++,this.isLoading=!0;var e=this;$.ajax({url:$K.location.root+$K.location.here+"?page="+$K.location.parameters.page,success:function(t){e.$target.before($(t).find(".k-infinite-load").children()),e.isLoading=!1,$K.ready(),$(window).trigger("k-infinite-loaded")}}),$K.location.parameters.page===this.totalPages&&this.bttn&&this.bttn.addClass("k-disabled")}},check:function(){this.$target&&!this.isLoading&&this.$target.prev().offset().top<$(window).scrollTop()+$(window).height()&&this.next()},init:function(){if(this.$target)return;var e=$("span.k-infinite-load").first();if(e.length){e.append($("<br/>").css("display","none").addClass("k-infinite-marker")),e.replaceWith(e.html()),this.$target=$(".k-infinite-marker").first();if(this.selector!==""){var t=$(this.selector),n=this;this.bttn=t,t.length&&t.on("click",function(){n.next()})}}}},ready:function(){$K.responsiveImages(),$K.responsiveBackgrounds(),$K.loadImages(),$K.lazyLoadInit(),$K.navigation.nest(),$K.infinity.init();var e;$(window).on("resize",function(){$K.resizeVideos(),clearTimeout(e),e=setTimeout(function(){$K.responsiveImages(),$K.responsiveBackgrounds(),$(window).trigger("k-resize")},250)});var t;$(window).off("scroll").on("scroll",function(){clearTimeout(t),t=setTimeout(function(){$K.lazyLoad(),$K.infinity.bttn||$K.infinity.check()},50)}),$(".k-content-embed").fitVids()}},$(document).ready(function(){$K.ready()})})(),function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null},r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return r.className="fit-vids-style",r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",i.parentNode.insertBefore(r,i),t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.youtube-nocookie.com']","iframe[src*='www.kickstarter.com']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%"),t.removeAttr("height").removeAttr("width")})})}}(jQuery);