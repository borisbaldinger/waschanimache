<script>
	$( function() {

		var colContainer = '';

		for ( var i = 0, len = parseInt( $('#grid').attr('class').replace('col-',''), 10 ); i < len; i++ ) {
			colContainer += $('#grid').html();
		}

		$('#grid').html(colContainer);

		var cols	= $('.column'),
			output	= [];

		$('.item').each( function(v,k) {

			var col		= v % cols.length,
				html	= output[col] || [];

			html[html.length]	= k;
			output[col]			= html;

			$(k).remove();

		});

		cols.each( function(v,k) {

			var str = '';

			$.each(output[v], function(j,w) {
				str += w.outerHTML;
			});

			k.innerHTML = str;

		});

	});
	</script>

	<div id="grid" class="col-{{ settings.grid_col_num }}">
		<div class="column"></div>
	</div>

	<koken:loop>

		<div class="item">

			<koken:link>

				<koken:img lazy="true" fade="true" />

			</koken:link>

		</div>

	</koken:loop>